package Jitflix.Jitflix.service.videcall;import Jitflix.Jitflix.entity.pg.AppUser;import Jitflix.Jitflix.entity.pg.VideoCall;import Jitflix.Jitflix.repository.pg.VideoCallRepository;import jakarta.transaction.Transactional;import org.springframework.stereotype.Service;import java.util.Date;import java.util.List;import java.util.UUID;@Servicepublic class VideoCallService {    private final VideoCallRepository videoCallRepository;    public VideoCallService(VideoCallRepository videoCallRepository) {        this.videoCallRepository = videoCallRepository;    }    @Transactional    public Long createVideoCall(AppUser createdBy) {        try {            VideoCall videoCall = new VideoCall();            videoCall.setCreatedBy(createdBy);            videoCall.setValidUntil(                    new Date(System.currentTimeMillis() + 45 * 60 * 1000));            videoCall.setCreatedAt(new Date());            VideoCall savedVideoCall = videoCallRepository.save(                    videoCall);            return savedVideoCall.getId();        } catch (Exception e) {            System.out.println("Error creating video call: " + e.getMessage());            e.printStackTrace();            return null;        }    }    public String getCreatedVideoCallRoomId(Long id) {        VideoCall videoCall = this.getVideoCallById(id);        System.out.println("Video call: " + videoCall.toString());        return videoCall.getRoomId().toString();    }//    public String createVideoCall(AppUser createdBy) {//        try {//            VideoCall videoCall = new VideoCall();//            videoCall.setCreatedBy(createdBy);//            Date fortyFiveMinutesFromNow = new Date(//                    System.currentTimeMillis() + 45 * 60 * 1000);//            videoCall.setValidUntil(fortyFiveMinutesFromNow);//            videoCall.setCreatedAt(new Date());//            VideoCall savedVideoCall = videoCallRepository.save(videoCall);//            UUID roomId = savedVideoCall.getRoomId();//            System.out.println("Created video call with room id: " + roomId);//            return roomId.toString();//        } catch (Exception e) {//            System.out.println(e);//            return null;//        }//    }    public VideoCall getVideoCallByRoomId(String roomId) {        return videoCallRepository.findVideoCallByRoomId(                UUID.fromString(roomId));    }    public VideoCall getVideoCallById(Long id) {        return videoCallRepository.findVideoCallById(id);    }    public List<VideoCall> getVideoCallsByHost(AppUser host) {        return videoCallRepository.findVideoCallsByCreatedBy(host);    }}